<!--  input.html -->


{% extends "base.html" %}
{% block main %}
	<h2 id="livetitle"> input.html </h2>

	<form action="/posturl" method="post">

	<label for="iUrl">URL:</label>
	<input id="iurl" name="iUrl" type="url" onkeyup="getTitle(this.value)"/>

	<label for="iLabel">Label:</label>
	<input name="iLabel" type="text" />

	<button type="submit">Submit</button>

	</form>


	<script type="text/javascript">

	var title;
	var old_url;

	var $livetitle = $('#livetitle');

	function getTitle(url){

		if (url != old_url){
		old_url = url;
		console.log(url);
		$.post('/fetchtitle', { 'iUrl': url}, function(data){

			title = data.title;

			console.log('Title:' + title, 'type: ' + typeof title);

			$livetitle.html(title);

		});
		}
	};


	</script>
{% endblock %}



