<!--  input.html -->


{% extends "base.html" %}
{% block body %}

	<div class="maindiv">
		<input class="megainput urlinput" type="text" placeholder="url __" onfocus="this.placeholder = ''" onblur="this.placeholder = 'url __'" onkeyup="getTitle(this.value)"/>
	</div>

	<div class="maindiv">
		<input class="megainput searchinput" type="text" placeholder="search __" onfocus="this.placeholder = ''" onblur="this.placeholder = 'search __'" onkeyup="search(this.value)"/>
	</div>


<script type="text/javascript">

	/* Initiating a global MYAPP object. This object is supposed to hold
	  all variables that otherwise would be global.
	  By doing it like this we end having just 1 global variable named
	   MYAPP. And all other variables are MYAPP.somevariable. 
	   GLOBAL variables are evil, thats why we do it. - Jonas */

	MYAPP = {
		'$urlinput' : $('.urlinput'),
		'$searchinput' : $('.searchinput')
	};

	function getTitle(iurl){
		var title;
		var old_url;

		MYAPP.$urlinput.blur();

		if (iurl != old_url){
			old_url = iurl;
			console.log(iurl);
			$.post('/fetchtitle', { 'url': iurl}, function(data){

				title = data.title;
				console.log('Title:' + title, 'type: ' + typeof title);
				
				MYAPP.$urlinput.val(title);


			});
		}
	};

	function search(istring) {

		console.log(istring);
		return 0;
	};


</script>
{% endblock %}



